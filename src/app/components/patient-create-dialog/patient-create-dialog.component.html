
<!-- doctor-edit-dialog.component.html -->
<h1>Create Patient</h1>
<div class="scrollable-dialog-content">

<form [formGroup]="patientForm">
  <mat-form-field>
    <mat-label>Name</mat-label>
    <input matInput formControlName="name" placeholder="Name" maxlength="50" (input)="onInputName()" (keydown)="onKeyPressName($event)">
    <mat-error *ngIf="patientForm.get('name')?.hasError('pattern') && !hasError">No se permiten caracteres especiales o números</mat-error>
    <mat-error *ngIf="patientForm?.get('name')?.hasError('required') && patientForm?.get('name')?.touched">Name is required</mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Last Name</mat-label>
    <input matInput formControlName="lastName" placeholder="Last Name" maxlength="50" (input)="onInputLastname()" (keydown)="onKeyPressLastname($event)">
    <mat-error *ngIf="patientForm.get('lastName')?.hasError('pattern') && !hasError">No se permiten caracteres especiales o números</mat-error>
    <mat-error *ngIf="patientForm?.get('lastName')?.hasError('required') && patientForm?.get('lastName')?.touched">Last Name is required</mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Email</mat-label>
    <input matInput formControlName="email" placeholder="Email">
    <mat-error *ngIf="patientForm?.get('email')?.hasError('required') && patientForm?.get('email')?.touched">Email is required</mat-error>
    <mat-error *ngIf="patientForm?.get('email')?.hasError('pattern') && patientForm?.get('email')?.touched">Invalid email address</mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Phone</mat-label>
    <input matInput formControlName="phone" placeholder="Phone" maxlength="9" (input)="onInputPhone()" (keypress)="onKeyPressPhone($event)">
    <mat-error *ngIf="patientForm.get('phone')?.hasError('pattern') && !hasError">
      Solo se permiten números
    </mat-error>
    <mat-error *ngIf="patientForm?.get('phone')?.hasError('required') && patientForm?.get('phone')?.touched">
      Campo obligatorio
    </mat-error>
    <mat-error *ngIf="patientForm?.get('phone')?.hasError('maxlength') && patientForm?.get('phone')?.touched">
      Máximo 9 dígitos
    </mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Address</mat-label>
    <input matInput formControlName="address" placeholder="Address">
    <mat-error *ngIf="patientForm?.get('address')?.hasError('required') && patientForm?.get('address')?.touched">Address is required</mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Birthday</mat-label>
    <input matInput [matDatepicker]="picker" formControlName="birthday" placeholder="dd/MM/yyyy" readonly>
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker startView="month" [panelClass]="'custom-datepicker'"></mat-datepicker>
    <mat-error *ngIf="patientForm?.get('birthday')?.hasError('required') && patientForm?.get('birthday')?.touched">Campo obligatorio</mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-label>DNI</mat-label>
    <input matInput formControlName="dni" placeholder="DNI" maxlength="8" (input)="onInputDNI()" (keypress)="onKeyPressDNI($event)" >
    <mat-error *ngIf="patientForm.get('dni')?.hasError('pattern') && !hasError">
      Solo se permiten números
    </mat-error>
    <mat-error *ngIf="patientForm?.get('dni')?.hasError('required') && patientForm?.get('dni')?.touched">DNI is required</mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Blood Type</mat-label>
    <input matInput formControlName="bloodType" placeholder="Blood Type">
  </mat-form-field>

  <mat-form-field>
    <mat-label>Diseases</mat-label>
    <input matInput formControlName="diseases" placeholder="Diseases">
  </mat-form-field>

  <mat-form-field>
    <mat-label>Height</mat-label>
    <input matInput formControlName="height" placeholder="Height">
    <mat-error *ngIf="patientForm.get('height')?.hasError('pattern') && !hasError">Solo números</mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Weight</mat-label>
    <input matInput formControlName="weight" placeholder="Weight">
    <mat-error *ngIf="patientForm.get('weight')?.hasError('pattern') && !hasError">Solo números</mat-error>
  </mat-form-field>

</form>
</div>

<div>
  <button mat-button (click)="save()">Save</button>
  <button mat-button (click)="closeDialog()">Cancel</button>